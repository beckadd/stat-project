---
title: "From Cape to Cairo: Following African Economic Crises from the Colonial Era to through the Modern Age"
author: "Six-Thirty-Eight"
date: "10/22/19"
output: github_document
---

```{r load-packages, warning = F}
library(tidyverse)
```

### Section 1. Introduction

Beck

### Section 2. Exploratory data analysis

```{r load-data}
africa <- read_csv("../data/african_crises.csv")
```

To start, we can visualize the number of years with a banking crisis in African countries as a bar graph.

```{r banking-crisis}
ggplot(data = africa, mapping = aes(x = banking_crisis)) +
  geom_bar(fill = "pink") +
  labs(x = "Banking Crisis", title = "Number of Years with Banking Crises in African Countries")
```

We can create a plot of all the countries included in the African economic dataset and what years data is given for them.

```{r countries-included, warning = F}
ggplot(data = africa, mapping = aes(x = year)) +
  geom_histogram(binwidth = 10, fill = "blue", col = "black") +
  labs(x = "Year", y = "Number of Countries", 
       title = "Increase in Total Number of African Country Economic 
       Observations Over Time")
ggplot(data = africa, mapping = aes(x = country, y = year)) +
  geom_point(size = .75, col = "orange") +
  coord_flip() +
  labs (x = "Country", y = "Year", title = "African Economic Data Observed Each
      Year by Country")
```

Overall, observations of African economies greatly increased after 1950. However, there are some African countries, such as Egypt and South Africa, whose economies have been monitored for over a century.

Next, we can determine the percentage of systemic crisis years for each country in the Africa dataset.

```{r systemic-crises}
africa %>%
  count(country, systemic_crisis) %>%
  group_by(country) %>%
  mutate(crisis_proportion = 1- (n/sum(n))) %>%
  filter(systemic_crisis == 0) %>%
  select(country, crisis_proportion) %>%
  arrange(desc(crisis_proportion))
```

The Central African Republic had the highest proportion of recorded years with systemic crises, with 32.8% of the years recorded having a systemic crisis. Out of the 13 African countries in the dataset, only South Africa, Angola, and Mauritius had no systemic crises.

Now, we'll explore an interesting question. Independence movements are tricky - while they might achieve democracy and self-governance for a country, they often contribute to political and economic stability. For each country, we'll determine how many years after independence a country will typically experience it's next crisis.

```{r independence, warning = F}
output <- tibble(country = distinct(africa, country)$country)
output$independence_year <- africa %>%
  filter(independence == 1) %>%
  group_by(country) %>%
  filter(row_number()==1) %>%
  ungroup() %>%
  select(year)
  
output$crisis_year <- africa %>%
  filter(independence == 1) %>%
  group_by(country) %>%
  filter(banking_crisis == "crisis") %>%
  filter(row_number() == 1) %>%
  ungroup() %>%
  select(year)
output <- output %>%
  mutate(difference = (crisis_year$year - independence_year$year))
ggplot(data = output, mapping = aes(y = difference)) +
  geom_boxplot() + 
  labs(title = "What's the typical amount of years between a country achieving independence and its next financial crisis?", y = "Number of Years")
output %>%
  summarise(IQR = IQR(difference), median = median(difference))
```

We see that the median amount of years a country will first encounter a banking crisis after they achieve independence is about 30 years, with an interquartile range of 11 years. This brings us to an interesting question - what values characterize countries that had a long period of economic prosperity after independence, and what characterizes countries that saw immediate financial crises? 

Next, let's analyze if exchange rate against the dollar and inflation rate correlate with economic crises.

```{r inflation-crisis-relationship, warning = F}
ggplot(data = africa, mapping = aes(x = inflation_annual_cpi, y = exch_usd, color = banking_crisis)) +
  geom_point() + 
  xlim(-10, 100)
```

We see that high levels of inflation often correspond to banking crises - but this is not always true. There were many cases of banking crises that existed even when inflation was lower than typical. Moreover, banking crises also tended to exist when exchange rates against the dollar were high. This could point to a pretty interesting research question - what levels of inflation and exchange rate against the dollar will signal a banking crisis (or any crisis in general?)

### Section 3. Research questions

Questions:

1. How did major European economies change with colonialism? How did African economies change when colonized? Conversely, how did European/African economies change with decolonization of the African continent?

 - Danger: there are a lot of factors that affect a European economies, and losing a colony might not be that impactful. Concentrate on African economies in this analysis.
 
2. Was an economic crisis more likely following n years after decolonization?

3. What factors are most associated with a systemic crisis in Africa? How can identify a systemic crisis in the dataset? What defines a systemic crisis, and how do African systemic crises compare to other nations' crises? 

### Section 4. Data

```{r glimpse-africa-data, warning = F, message = F}
africa <- read_csv("/cloud/project/data/african_crises.csv")
global <- read_csv("/cloud/project/data/global_crisis_data.csv")
glimpse(africa)
glimpse(global)
```